(this["webpackJsonppokemon-store"]=this["webpackJsonppokemon-store"]||[]).push([[0],{33:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);a(33);var c=a(0),n=a.n(c),r=a(11),s=a.n(r),o=a(8),i=a(1);var l=function(){var e=n.a.useContext(_).state;return Object(i.jsx)("nav",{className:"navbar sticky-top navbar-light bg-light",children:Object(i.jsxs)("div",{className:"container-fluid",children:[Object(i.jsx)("a",{className:"navbar-brand",href:"#",children:"Pokemon Store"}),Object(i.jsx)("div",{className:"d-flex",children:e.cartCounter?Object(i.jsxs)("span",{className:"cart-items-counter badge badge-danger",children:["Cart ",Object(i.jsx)("span",{className:"badge badge-pill badge-dark",children:e.cartCounter})]}):""})]})})},j=a(12),d=a.n(j),m=a(16);var u=function(e){var t=e.type;return Object(i.jsx)("span",{className:"badge bg-".concat(t," type mb-1"),children:t})};var b=function(e){var t=e.url,a=n.a.useState(null),c=Object(o.a)(a,2),r=c[0],s=c[1],l=n.a.useContext(_).dispatch;function j(e){var t=e;return t.types=function(e){var t=[];return e.forEach((function(e){t.push(e.type.name)})),t}(t.types),t}return n.a.useEffect((function(){function e(){return(e=Object(m.a)(d.a.mark((function e(){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:c=e.sent,s(j(c));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{className:"col mb-3 pokemon-card",children:Object(i.jsxs)("div",{className:"card h-100 text-center",children:[Object(i.jsx)("img",{src:"".concat("https://pokeres.bastionbot.org/images/pokemon/").concat(r.id,".png"),alt:"Pokemon cover",className:"card-img-top"}),Object(i.jsxs)("div",{className:"card-body text-center pb-0 pt-2",children:[Object(i.jsx)("h6",{className:"card-title",children:r.name}),Object(i.jsx)("div",{className:"card-text",children:Object(i.jsxs)("p",{children:[Object(i.jsx)("span",{className:"text-muted",children:"Price:"})," ",Object(i.jsxs)("span",{className:"badge badge-pill badge-info",children:["$",r.id]})]})})]}),Object(i.jsx)("div",{className:"d-flex text-center types",children:r.types.map((function(e,t){return Object(i.jsx)(u,{type:e},t)}))}),Object(i.jsx)("button",{className:"btn btn-dark btn-sm mt-2",onClick:function(){var e={name:r.name,id:"".concat(Date.now(),"-").concat(r.id),price:r.id};l({type:"ADD_TO_CART",payload:{cartItem:e}})},children:"Add to cart"})]})})}):Object(i.jsx)("p",{children:"loading"})},p="https://pokeapi.co/api/v2/pokemon/",O="?limit=2";var x=function(){var e=n.a.useState(null),t=Object(o.a)(e,2),a=t[0],c=t[1];return n.a.useEffect((function(){function e(){return(e=Object(m.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p).concat(O));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,c(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),a?Object(i.jsx)("div",{className:"row",children:a.results.map((function(e){return Object(i.jsx)(b,{url:e.url},"".concat(Date.now,"-").concat(e.name))}))}):Object(i.jsx)("p",{children:"loading"})},h=a(52),v=a(53),f=a(49);var k=function(e){var t=e.pokemon,a=n.a.useContext(_).dispatch;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(v.a.Item,{className:"d-flex cart-item",children:[Object(i.jsx)("span",{children:t.name}),Object(i.jsx)(f.a,{variant:"danger",onClick:function(){var e=t.id;console.log("pokemon id: "+e),a({type:"REMOVE_FROM_CART",payload:{id:e}})},className:"btn-sm",children:"Remove"})]})})};var y=function(){var e=n.a.useContext(_),t=e.state,a=e.dispatch;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(h.a,{children:[Object(i.jsx)(h.a.Header,{children:"My shoping cart"}),Object(i.jsxs)(h.a.Body,{children:[Object(i.jsx)(h.a.Title,{children:"Pokemons to buy"}),Object(i.jsx)(v.a,{className:"cart-list",children:t.cartPokemons.map((function(e,t){return Object(i.jsx)(k,{pokemon:e},"".concat(Date.now(),"-").concat(t))}))}),t.cartCounter?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("p",{className:"mt-3",children:[Object(i.jsx)("span",{className:"text-muted",children:"Total: "}),"$",t.cartTotal]}),Object(i.jsxs)("p",{className:"mt-3",children:[Object(i.jsx)("span",{className:"text-muted",children:"Quantity: "}),t.cartCounter]}),Object(i.jsx)(f.a,{variant:"primary",onClick:function(){a({type:"PURCHASE_POKEMONS"})},className:"mt-3",children:"Purchase"})]}):""]})]})})};var N=function(e){var t=e.pokemon,a=n.a.useContext(_).dispatch;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(v.a.Item,{className:"d-flex cart-item",children:[Object(i.jsx)("span",{children:t.name}),Object(i.jsx)(f.a,{variant:"danger",onClick:function(){var e=t.id;a({type:"REMOVE_FROM_MY_POKEMONS",payload:{id:e}})},className:"btn-sm",children:"Remove"})]})})};var g=function(){var e=n.a.useContext(_).state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(h.a,{children:[Object(i.jsx)(h.a.Header,{children:"Pokemons"}),Object(i.jsxs)(h.a.Body,{children:[Object(i.jsx)(h.a.Title,{children:"My purchased pokemons"}),Object(i.jsx)(v.a,{children:e.myPokemons.map((function(e,t){return Object(i.jsx)(N,{pokemon:e},"".concat(Date.now(),"-").concat(t))}))})]})]})})},C=a(51),P=a(50);var E=function(){var e=n.a.useState("pokemon-list"),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)(C.a,{id:"controlled-tab-example",activeKey:a,onSelect:function(e){return c(e)},className:"mb-3",children:[Object(i.jsx)(P.a,{eventKey:"pokemon-list",title:"Pokemon List",children:Object(i.jsx)(x,{})}),Object(i.jsx)(P.a,{eventKey:"my-pokemons",title:"My pokemons",children:Object(i.jsx)(g,{})}),Object(i.jsx)(P.a,{eventKey:"cart",title:"Cart",children:Object(i.jsx)(y,{})})]})})})},M=a(26),R=a(10);var T=function(e,t){switch(t.type){case"ADD_TO_CART":var a=t.payload.cartItem,c=t.payload.cartItem.price;return Object(R.a)(Object(R.a)({},e),{},{cartTotal:e.cartTotal+c,cartCounter:e.cartCounter+1,cartPokemons:[a].concat(Object(M.a)(e.cartPokemons))});case"REMOVE_FROM_CART":var n=t.payload.id,r=e.cartPokemons.find((function(e){return e.id==n})).price;return Object(R.a)(Object(R.a)({},e),{},{cartTotal:e.cartTotal-r,cartCounter:e.cartCounter-1,cartPokemons:e.cartPokemons.filter((function(e){return e.id!==n}))});case"REMOVE_FROM_MY_POKEMONS":var s=t.payload.id;return Object(R.a)(Object(R.a)({},e),{},{myPokemons:e.myPokemons.filter((function(e){return e.id!==s}))});case"PURCHASE_POKEMONS":return{cartTotal:0,cartCounter:0,myPokemons:[].concat(Object(M.a)(e.cartPokemons),Object(M.a)(e.myPokemons)),cartPokemons:[]};default:return e}},_=n.a.createContext({cartTotal:0,cartCounter:0,myPokemons:[],cartPokemons:[]});var w=function(){var e=n.a.useContext(_),t=n.a.useReducer(T,e),a=Object(o.a)(t,2),c=a[0],r=a[1];return Object(i.jsxs)(_.Provider,{value:{state:c,dispatch:r},children:[Object(i.jsx)(l,{}),Object(i.jsx)(E,{})]})},F=(a(46),document.getElementById("root"));s.a.render(Object(i.jsx)(w,{}),F)}},[[47,1,2]]]);
//# sourceMappingURL=main.f40c414a.chunk.js.map