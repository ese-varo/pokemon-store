{"version":3,"sources":["components/Header.js","components/PokemonType.js","components/PokemonCard.js","components/PokemonCardList.js","components/CartItem.js","components/Cart.js","components/PokemonItem.js","components/MyPokemons.js","components/Content.js","reducer.js","App.js","index.js"],"names":["Header","state","React","useContext","SessionContext","className","href","cartCounter","PokemonType","type","PokemonCard","url","useState","pokemon","setPokemon","dispatch","getPokemonData","data","pokemonData","types","pokemonTypes","forEach","push","getTypes","useEffect","a","fetch","response","json","getPokemon","src","id","alt","name","map","i","onClick","cartItem","Date","now","price","payload","pokemonsUrl","endpoint","PokemonCardList","pokemons","setPokemons","getPokemons","results","CartItem","ListGroup","Item","Button","variant","Cart","Card","Body","Title","cartPokemons","cartTotal","stripeKey","process","token","addresses","PokemonItem","MyPokemons","myPokemons","Content","key","setKey","Tabs","activeKey","onSelect","k","Tab","eventKey","title","sessionReducer","action","newItem","removedItemId","find","filter","createContext","App","initialSessionState","useReducer","Provider","value","rootNode","document","getElementById","ReactDOM","render"],"mappings":"0MAsBeA,MAnBf,WAAoB,IACVC,EAAUC,IAAMC,WAAWC,GAA3BH,MAER,OACE,qBAAKI,UAAU,0CAAf,SACE,sBAAKA,UAAU,kBAAf,UACE,mBAAGA,UAAU,eAAeC,KAAK,IAAjC,2BACA,qBAAKD,UAAU,SAAf,SACGJ,EAAMM,YACL,uBAAMF,UAAU,wCAAhB,kBACO,sBAAMA,UAAU,8BAAhB,SAA+CJ,EAAMM,iBAEzD,W,yBCTAC,MAJf,YAAgC,IAATC,EAAQ,EAARA,KACrB,OAAO,sBAAMJ,UAAS,mBAAcI,EAAd,cAAf,SAAgDA,KCmE1CC,MAhEf,YAA+B,IAARC,EAAO,EAAPA,IAAO,EACET,IAAMU,SAAS,MADjB,mBACrBC,EADqB,KACZC,EADY,KAEpBC,EAAab,IAAMC,WAAWC,GAA9BW,SAgBR,SAASC,EAAeC,GACtB,IAAIC,EAAcD,EAElB,OADAC,EAAYC,MAId,SAAkBA,GAChB,IAAIC,EAAe,GAInB,OAHAD,EAAME,SAAQ,SAAAZ,GACZW,EAAaE,KAAKb,EAAI,KAAJ,SAEbW,EATaG,CAASL,EAAYC,OAClCD,EAWT,OA5BAhB,IAAMsB,WAAU,WAAM,4CACpB,8BAAAC,EAAA,sEACyBC,MAAMf,GAD/B,cACQgB,EADR,gBAEqBA,EAASC,OAF9B,OAEQX,EAFR,OAGEH,EAAWE,EAAeC,IAH5B,4CADoB,uBAAC,WAAD,wBAMpBY,KACC,IAqBIhB,EACL,mCACE,qBAAKR,UAAU,wBAAf,SACE,sBAAKA,UAAU,yBAAf,UACE,qBACEyB,IAAG,UAvCM,kDAuCN,OAAoBjB,EAAQkB,GAA5B,QACHC,IAAI,gBACJ3B,UAAU,iBAEZ,sBAAKA,UAAU,kCAAf,UACE,oBAAIA,UAAU,aAAd,SAA4BQ,EAAQoB,OACpC,qBAAK5B,UAAU,YAAf,SACE,8BACE,sBAAMA,UAAU,aAAhB,oBADF,IAC6C,uBAAMA,UAAU,8BAAhB,cAAgDQ,EAAQkB,cAIzG,qBAAK1B,UAAU,2BAAf,SACGQ,EAAQM,MAAMe,KAAI,SAACzB,EAAM0B,GAAP,OAAa,cAAC,EAAD,CAAqB1B,KAAMA,GAAT0B,QAEpD,wBACE9B,UAAU,2BACV+B,QAzCV,WACE,IAAMC,EAAW,CAAEJ,KAAMpB,EAAQoB,KAAMF,GAAG,GAAD,OAAKO,KAAKC,MAAV,YAAmB1B,EAAQkB,IAAMS,MAAO3B,EAAQkB,IACzFhB,EAAS,CAAEN,KAAM,cAAegC,QAAS,CAAEJ,eAqCrC,gCAQN,yCC/DEK,EAAc,qCACdC,EAAW,aAuBFC,MArBf,WAA6B,IAAD,EACM1C,IAAMU,SAAS,MADrB,mBACnBiC,EADmB,KACTC,EADS,KAY1B,OATA5C,IAAMsB,WAAU,WAAM,4CACpB,8BAAAC,EAAA,sEACyBC,MAAM,GAAD,OAAIgB,GAAJ,OAAkBC,IADhD,cACQhB,EADR,gBAEqBA,EAASC,OAF9B,OAEQX,EAFR,OAGE6B,EAAY7B,GAHd,4CADoB,uBAAC,WAAD,wBAMpB8B,KACC,IAEIF,EACL,qBAAKxC,UAAU,MAAf,SACGwC,EAASG,QAAQd,KAAI,SAACrB,GAAD,OAAa,cAAC,EAAD,CAAiDF,IAAKE,EAAQF,KAA9D,UAAqB2B,KAAKC,IAA1B,YAAiC1B,EAAQoB,YAG9E,yC,wBCEWgB,MArBf,YAAiC,IAAZpC,EAAW,EAAXA,QACXE,EAAab,IAAMC,WAAWC,GAA9BW,SAOR,OACE,mCACE,eAACmC,EAAA,EAAUC,KAAX,CAAgB9C,UAAU,mBAA1B,UACE,+BAAOQ,EAAQoB,OACf,cAACmB,EAAA,EAAD,CAAQC,QAAQ,SACdjB,QAVR,WACE,IAAML,EAAKlB,EAAQkB,GACnBhB,EAAS,CAAEN,KAAM,mBAAoBgC,QAAS,CAAEV,SAS1C1B,UAAU,SAFZ,0B,iBC2BOiD,MArCf,WAAkB,IAAD,EACapD,IAAMC,WAAWC,GAArCH,EADO,EACPA,MAAOc,EADA,EACAA,SAWf,OACE,mCACE,eAACwC,EAAA,EAAD,WACE,cAACA,EAAA,EAAKvD,OAAN,8BACA,eAACuD,EAAA,EAAKC,KAAN,WACE,cAACD,EAAA,EAAKE,MAAN,8BACA,cAACP,EAAA,EAAD,CAAW7C,UAAU,YAArB,SACGJ,EAAMyD,aAAaxB,KAAI,SAACrB,EAASsB,GAAV,OAAgB,cAAC,EAAD,CAAqCtB,QAASA,GAA9C,UAAkByB,KAAKC,MAAvB,YAAgCJ,SAEzElC,EAAMM,YACL,qCACE,oBAAGF,UAAU,OAAb,UAAoB,sBAAMA,UAAU,aAAhB,qBAApB,IAAiEJ,EAAM0D,aACvE,oBAAGtD,UAAU,OAAb,UAAoB,sBAAMA,UAAU,aAAhB,wBAA+CJ,EAAMM,eACzE,cAAC,IAAD,CACEqD,UAAWC,8GACXC,MAxBd,SAAqBA,EAAOC,GAM1BhD,EAAS,CAAEN,KAAM,4BAqBP,YCXCuD,MArBf,YAAoC,IAAZnD,EAAW,EAAXA,QACdE,EAAab,IAAMC,WAAWC,GAA9BW,SAOR,OACE,mCACE,eAACmC,EAAA,EAAUC,KAAX,CAAgB9C,UAAU,mBAA1B,UACE,+BAAOQ,EAAQoB,OACf,cAACmB,EAAA,EAAD,CAAQC,QAAQ,SACdjB,QAVR,WACE,IAAML,EAAKlB,EAAQkB,GACnBhB,EAAS,CAAEN,KAAM,0BAA2BgC,QAAS,CAAEV,SASjD1B,UAAU,SAFZ,0BCOO4D,MAlBf,WAAwB,IACdhE,EAAUC,IAAMC,WAAWC,GAA3BH,MAER,OACE,mCACE,eAACsD,EAAA,EAAD,WACE,cAACA,EAAA,EAAKvD,OAAN,uBACA,eAACuD,EAAA,EAAKC,KAAN,WACE,cAACD,EAAA,EAAKE,MAAN,oCACA,cAACP,EAAA,EAAD,UACGjD,EAAMiE,WAAWhC,KAAI,SAACrB,EAASsB,GAAV,OAAgB,cAAC,EAAD,CAAwCtB,QAASA,GAAjD,UAAqByB,KAAKC,MAA1B,YAAmCJ,kB,gBCqBtEgC,MA9Bf,WAAqB,IAAD,EACIjE,IAAMU,SAAS,gBADnB,mBACXwD,EADW,KACNC,EADM,KAGlB,OACE,mCACE,qBAAKhE,UAAU,YAAf,SACE,eAACiE,EAAA,EAAD,CACEvC,GAAG,yBACHwC,UAAWH,EACXI,SAAU,SAACC,GAAD,OAAOJ,EAAOI,IACxBpE,UAAU,OAJZ,UAOE,cAACqE,EAAA,EAAD,CAAKC,SAAS,eAAeC,MAAM,eAAnC,SACE,cAAC,EAAD,MAGF,cAACF,EAAA,EAAD,CAAKC,SAAS,cAAcC,MAAM,cAAlC,SACE,cAAC,EAAD,MAGF,cAACF,EAAA,EAAD,CAAKC,SAAS,OAAOC,MAAM,OAA3B,SACE,cAAC,EAAD,c,gBCcGC,MA1Cf,SAAwB5E,EAAO6E,GAC7B,OAAQA,EAAOrE,MACb,IAAK,cACH,IAAMsE,EAAUD,EAAOrC,QAAQJ,SACzBG,EAAQsC,EAAOrC,QAAQJ,SAASG,MACtC,OAAO,2BACFvC,GADL,IAEE0D,UAAW1D,EAAM0D,UAAYnB,EAC7BjC,YAAaN,EAAMM,YAAc,EACjCmD,aAAa,CAAEqB,GAAH,mBAAe9E,EAAMyD,iBAGrC,IAAK,mBACH,IAAMsB,EAAgBF,EAAOrC,QAAQV,GAC/BS,EAAQvC,EAAMyD,aAAauB,MAAK,SAAApE,GAAO,OAAIA,EAAQkB,IAAMiD,KAAexC,MAC9E,OAAO,2BACFvC,GADL,IAEE0D,UAAW1D,EAAM0D,UAAYnB,EAC7BjC,YAAaN,EAAMM,YAAc,EACjCmD,aAAczD,EAAMyD,aAAawB,QAAO,SAAArE,GAAO,OAAIA,EAAQkB,KAAOiD,OAGtE,IAAK,0BACH,IAAMA,EAAgBF,EAAOrC,QAAQV,GACrC,OAAO,2BACF9B,GADL,IAEEiE,WAAYjE,EAAMiE,WAAWgB,QAAO,SAAArE,GAAO,OAAIA,EAAQkB,KAAOiD,OAGlE,IAAK,oBACH,MAAO,CACLrB,UAAW,EACXpD,YAAa,EACb2D,WAAW,GAAD,mBAAMjE,EAAMyD,cAAZ,YAA6BzD,EAAMiE,aAC7CR,aAAc,IAGlB,QACE,OAAOzD,ICjCAG,EAAiBF,IAAMiF,cAAc,CAChDxB,UAAW,EACXpD,YAAa,EACb2D,WAAY,GACZR,aAAc,KAeD0B,MAZf,WACE,IAAMC,EAAsBnF,IAAMC,WAAWC,GAD/B,EAEYF,IAAMoF,WAAWT,EAAgBQ,GAF7C,mBAEPpF,EAFO,KAEAc,EAFA,KAId,OACE,eAACX,EAAemF,SAAhB,CAAyBC,MAAO,CAAEvF,QAAOc,YAAzC,UACE,cAAC,EAAD,IACA,cAAC,EAAD,QCbA0E,G,MAAWC,SAASC,eAAe,SACzCC,IAASC,OAAO,cAAC,EAAD,IAASJ,K","file":"static/js/main.95d41f55.chunk.js","sourcesContent":["import React from 'react' // eslint-disable-line no-unused-vars\nimport { SessionContext } from '../App'\n\nfunction Header () {\n  const { state } = React.useContext(SessionContext)\n\n  return (\n    <nav className='navbar sticky-top navbar-light bg-light'>\n      <div className='container-fluid'>\n        <a className='navbar-brand' href='#'>Pokemon Store</a>\n        <div className='d-flex'>\n          {state.cartCounter ? (\n            <span className='cart-items-counter badge badge-danger'>\n              Cart <span className='badge badge-pill badge-dark'>{state.cartCounter}</span>\n            </span>\n          ) : ('')}\n        </div>\n      </div>\n    </nav>\n  )\n}\n\nexport default Header\n","import React from 'react' // eslint-disable-line no-unused-vars\n\nfunction PokemonType({ type }) {\n  return <span className={`badge bg-${type} type mb-1`}>{type}</span>\n}\n\nexport default PokemonType\n","import React from 'react' // eslint-disable-line no-unused-vars\nimport PokemonType from './PokemonType'\nimport { SessionContext } from '../App'\n\nconst imageBaseUrl = 'https://pokeres.bastionbot.org/images/pokemon/'\n\nfunction PokemonCard({ url }) {\n  const [pokemon, setPokemon] = React.useState(null)\n  const { dispatch } = React.useContext(SessionContext)\n\n  React.useEffect(() => {\n    async function getPokemon() {\n      const response = await fetch(url)\n      const data = await response.json()\n      setPokemon(getPokemonData(data))\n    }\n    getPokemon()\n  }, [])\n\n  function handleAddToCart() {\n    const cartItem = { name: pokemon.name, id: `${Date.now()}-${pokemon.id}`, price: pokemon.id }\n    dispatch({ type: 'ADD_TO_CART', payload: { cartItem } })\n  }\n\n  function getPokemonData(data) {\n    let pokemonData = data\n    pokemonData.types = getTypes(pokemonData.types)\n    return pokemonData\n  }\n\n  function getTypes(types) {\n    let pokemonTypes = []\n    types.forEach(type => {\n      pokemonTypes.push(type['type']['name'])\n    })\n    return pokemonTypes\n  }\n\n  return pokemon ? (\n    <>\n      <div className='col mb-3 pokemon-card'>\n        <div className='card h-100 text-center'>\n          <img\n            src={`${imageBaseUrl}${pokemon.id}.png`}\n            alt='Pokemon cover'\n            className='card-img-top'\n          />\n          <div className='card-body text-center pb-0 pt-2'>\n            <h6 className='card-title'>{pokemon.name}</h6>\n            <div className='card-text'>\n              <p>\n                <span className='text-muted'>Price:</span> <span className='badge badge-pill badge-info'>${pokemon.id}</span>\n              </p>\n            </div>\n          </div>\n          <div className='d-flex text-center types'>\n            {pokemon.types.map((type, i) => <PokemonType key={i} type={type} />)}\n          </div>\n          <button\n            className='btn btn-dark btn-sm mt-2'\n            onClick={handleAddToCart}\n          >Add to cart</button>\n        </div>\n      </div>\n    </>\n  ) : (\n    <p>loading</p>\n  )\n}\n\nexport default PokemonCard\n","import React from 'react' // eslint-disable-line no-unused-vars\nimport PokemonCard from './PokemonCard'\n\nconst pokemonsUrl = 'https://pokeapi.co/api/v2/pokemon/'\nconst endpoint = '?limit=130'\n\nfunction PokemonCardList () {\n  const [pokemons, setPokemons] = React.useState(null) // eslint-disable-line no-unused-vars\n\n  React.useEffect(() => {\n    async function getPokemons() {\n      const response = await fetch(`${pokemonsUrl}${endpoint}`)\n      const data = await response.json()\n      setPokemons(data)\n    }\n    getPokemons()\n  }, [])\n\n  return pokemons ? (\n    <div className='row'>\n      {pokemons.results.map((pokemon) => <PokemonCard key={`${Date.now}-${pokemon.name}`} url={pokemon.url} />)}\n    </div>\n  ) : (\n    <p>loading</p>\n  )\n}\n\nexport default PokemonCardList\n","import React from 'react' // eslint-disable-line no-unused-vars\nimport { ListGroup, Card, Button } from 'react-bootstrap' // eslint-disable-line no-unused-vars\nimport { SessionContext } from '../App'\n\nfunction CartItem ({ pokemon }) {\n  const { dispatch } = React.useContext(SessionContext)\n\n  function handleRemoveItem() {\n    const id = pokemon.id\n    dispatch({ type: 'REMOVE_FROM_CART', payload: { id } })\n  }\n\n  return (\n    <>\n      <ListGroup.Item className='d-flex cart-item'>\n        <span>{pokemon.name}</span>\n        <Button variant='danger'\n          onClick={handleRemoveItem}\n          className='btn-sm'\n        >Remove</Button>\n      </ListGroup.Item>\n    </>\n  )\n}\n\nexport default CartItem\n","import React from 'react' // eslint-disable-line no-unused-vars\nimport { ListGroup, Card, Button } from 'react-bootstrap' // eslint-disable-line no-unused-vars\nimport CartItem from './CartItem'\nimport { SessionContext } from '../App'\nimport StripeCheckout from 'react-stripe-checkout'\n\nfunction Cart () {\n  const { state, dispatch } = React.useContext(SessionContext)\n\n  function handleToken(token, addresses) { // eslint-disable-line no-unused-vars\n    // handle paying process\n    handlePurchasePokemons()\n  }\n\n  function handlePurchasePokemons() {\n    dispatch({ type: 'PURCHASE_POKEMONS' })\n  }\n\n  return (\n    <>\n      <Card>\n        <Card.Header>My shoping cart</Card.Header>\n        <Card.Body>\n          <Card.Title>Pokemons to buy</Card.Title>\n          <ListGroup className='cart-list'>\n            {state.cartPokemons.map((pokemon, i) => <CartItem key={`${Date.now()}-${i}`} pokemon={pokemon} />)}\n          </ListGroup>\n          {state.cartCounter ? (\n            <>\n              <p className='mt-3'><span className='text-muted'>Total: </span>${state.cartTotal}</p>\n              <p className='mt-3'><span className='text-muted'>Quantity: </span>{state.cartCounter}</p>\n              <StripeCheckout \n                stripeKey={process.env.REACT_APP_STRIPE_SECRET}\n                token={handleToken}\n              />\n            </>\n          ) : ''}\n        </Card.Body>\n      </Card>\n    </>\n  )\n}\n\nexport default Cart\n","import React from 'react' // eslint-disable-line no-unused-vars\nimport { ListGroup, Card, Button } from 'react-bootstrap' // eslint-disable-line no-unused-vars\nimport { SessionContext } from '../App'\n\nfunction PokemonItem ({ pokemon }) {\n  const { dispatch } = React.useContext(SessionContext)\n\n  function handleRemoveItem() {\n    const id = pokemon.id\n    dispatch({ type: 'REMOVE_FROM_MY_POKEMONS', payload: { id } })\n  }\n\n  return (\n    <>\n      <ListGroup.Item className='d-flex cart-item'>\n        <span>{pokemon.name}</span>\n        <Button variant='danger'\n          onClick={handleRemoveItem}\n          className='btn-sm'\n        >Remove</Button>\n      </ListGroup.Item>\n    </>\n  )\n}\n\nexport default PokemonItem\n","import React from 'react' // eslint-disable-line no-unused-vars\nimport { ListGroup, Card } from 'react-bootstrap' // eslint-disable-line no-unused-vars\nimport PokemonItem from './PokemonItem'\nimport { SessionContext } from '../App'\n\nfunction MyPokemons () {\n  const { state } = React.useContext(SessionContext)\n\n  return (\n    <>\n      <Card>\n        <Card.Header>Pokemons</Card.Header>\n        <Card.Body>\n          <Card.Title>My purchased pokemons</Card.Title>\n          <ListGroup>\n            {state.myPokemons.map((pokemon, i) => <PokemonItem key={`${Date.now()}-${i}`} pokemon={pokemon} />)}\n          </ListGroup>\n        </Card.Body>\n      </Card>\n    </>\n  )\n}\n\nexport default MyPokemons\n","import React from 'react' // eslint-disable-line no-unused-vars\nimport PokemonCardList from './PokemonCardList'\nimport Cart from './Cart'\nimport MyPokemons from './MyPokemons'\nimport { Tabs, Tab }from 'react-bootstrap' // eslint-disable-line no-unused-vars\n\nfunction Content () {\n  const [key, setKey] = React.useState('pokemon-list')\n\n  return (\n    <>\n      <div className=\"container\">\n        <Tabs\n          id=\"controlled-tab-example\"\n          activeKey={key}\n          onSelect={(k) => setKey(k)}\n          className='mb-3'\n        >\n\n          <Tab eventKey=\"pokemon-list\" title=\"Pokemon List\">\n            <PokemonCardList />\n          </Tab>\n\n          <Tab eventKey=\"my-pokemons\" title=\"My pokemons\">\n            <MyPokemons />\n          </Tab>\n\n          <Tab eventKey=\"cart\" title=\"Cart\">\n            <Cart />\n          </Tab>\n        </Tabs>\n      </div>\n    </>\n  )\n}\n\nexport default Content\n","function sessionReducer(state, action) {\n  switch (action.type) {\n    case 'ADD_TO_CART': {\n      const newItem = action.payload.cartItem\n      const price = action.payload.cartItem.price\n      return {\n        ...state,\n        cartTotal: state.cartTotal + price,\n        cartCounter: state.cartCounter + 1,\n        cartPokemons: [newItem, ...state.cartPokemons]\n      }\n    }\n    case 'REMOVE_FROM_CART': {\n      const removedItemId = action.payload.id\n      const price = state.cartPokemons.find(pokemon => pokemon.id == removedItemId).price\n      return { \n        ...state,\n        cartTotal: state.cartTotal - price,\n        cartCounter: state.cartCounter - 1,\n        cartPokemons: state.cartPokemons.filter(pokemon => pokemon.id !== removedItemId)\n      }\n    }\n    case 'REMOVE_FROM_MY_POKEMONS': {\n      const removedItemId = action.payload.id\n      return { \n        ...state,\n        myPokemons: state.myPokemons.filter(pokemon => pokemon.id !== removedItemId)\n      }\n    }\n    case 'PURCHASE_POKEMONS': {\n      return {\n        cartTotal: 0,\n        cartCounter: 0,\n        myPokemons: [...state.cartPokemons, ...state.myPokemons],\n        cartPokemons: []\n      }\n    }\n    default:\n      return state\n  }\n}\n\nexport default sessionReducer\n","import React from 'react' // eslint-disable-line no-unused-vars\nimport Header from './components/Header'\nimport Content from './components/Content'\nimport sessionReducer from './reducer'\n\nexport const SessionContext = React.createContext({\n  cartTotal: 0,\n  cartCounter: 0,\n  myPokemons: [],\n  cartPokemons: []\n})\n\nfunction App () {\n  const initialSessionState = React.useContext(SessionContext)\n  const [state, dispatch] = React.useReducer(sessionReducer, initialSessionState)\n\n  return (\n    <SessionContext.Provider value={{ state, dispatch }}>\n      <Header />\n      <Content />\n    </SessionContext.Provider>\n  )\n}\n\nexport default App\n","import '../src/main.scss'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport 'bootstrap/dist/css/bootstrap.css'\n\nconst rootNode = document.getElementById('root')\nReactDOM.render(<App />, rootNode)\n"],"sourceRoot":""}